<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mis Metas — NutriTrack Web</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
  <!-- Encabezado modular -->
  <script>
    fetch('../components/header.html')
      .then(res => res.text())
      .then(html => {
        document.body.insertAdjacentHTML('afterbegin', html);
      });
  </script>

  <main class="page-container">
    <h1 class="module-title">Mis Metas</h1>

    <!-- Fila superior: búsqueda + filtros + CTA -->
    <div class="card" style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
      <input id="goal-search" class="search-input-header" style="max-width:380px;" placeholder="Buscar por nombre o frecuencia..." />
      <div style="display:flex; gap:8px; flex-wrap:wrap;">
        <button class="btn btn-edit" data-filter="all">Todos</button>
        <button class="btn btn-edit" data-filter="active">Activos</button>
        <button class="btn btn-edit" data-filter="done">Completados</button>
        <button class="btn btn-edit" data-filter="pending">Pendientes</button>
      </div>
      <div style="margin-left:auto;">
        <button id="btn-open-new" class="btn btn-primary">+ Agregar Objetivo</button>
      </div>
    </div>

    <!-- Tabla de metas -->
    <div class="card table-responsive">
      <table class="data-table" id="goals-table">
        <thead>
          <tr>
            <th>Nombre del Objetivo</th>
            <th>Frecuencia</th>
            <th style="width:240px;">Progreso</th>
            <th class="actions">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Beber 2L de agua diariamente</td>
            <td>Diario</td>
            <td>
              <div class="progress"><div class="progress__bar" style="width:75%"></div></div>
              <small>75%</small>
            </td>
            <td class="actions">
              <button class="btn btn-edit btn-sm" data-edit="1">Editar</button>
              <button class="btn btn-danger btn-sm" data-delete="1">Eliminar</button>
            </td>
          </tr>
          <tr>
            <td>Hacer ejercicio 3 veces a la semana</td>
            <td>Semanal</td>
            <td>
              <div class="progress"><div class="progress__bar" style="width:50%"></div></div>
              <small>50%</small>
            </td>
            <td class="actions">
              <button class="btn btn-edit btn-sm" data-edit="2">Editar</button>
              <button class="btn btn-danger btn-sm" data-delete="2">Eliminar</button>
            </td>
          </tr>
          <tr>
            <td>Dormir al menos 8 horas al día</td>
            <td>Diario</td>
            <td>
              <div class="progress"><div class="progress__bar" style="width:55%"></div></div>
              <small>55%</small>
            </td>
            <td class="actions">
              <button class="btn btn-edit btn-sm" data-edit="3">Editar</button>
              <button class="btn btn-danger btn-sm" data-delete="3">Eliminar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <!-- MODAL: NUEVA META -->
  <dialog id="modal-new" class="modal card" style="max-width:680px;">
    <h2 class="module-title" style="margin-top:0;">Agregar Nuevo Objetivo</h2>
    <form id="form-new" class="registro-form">
      <label>Nombre del Objetivo</label>
      <input type="text" required placeholder="Ej. Beber 2L de agua diarios" />

      <label>Descripción</label>
      <textarea rows="4" placeholder="¿Por qué es importante? ¿Cómo lo lograrás?"></textarea>

      <label>Frecuencia</label>
      <select>
        <option>Diaria</option>
        <option>Semanal</option>
        <option>Mensual</option>
        <option>Largo Plazo</option>
        <option>Fecha Exacta</option>
      </select>

      <div class="form-group-inline">
        <div class="input-group">
          <label>Fecha de Inicio</label>
          <input type="date" />
        </div>
        <div class="input-group">
          <label>Fecha de Fin</label>
          <input type="date" />
        </div>
      </div>

      <label><input type="checkbox" /> Objetivo recurrente</label>

      <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:8px;">
        <button type="button" class="btn" data-close-new>Cancelar</button>
        <button type="submit" class="btn btn-primary">Guardar Objetivo</button>
      </div>
    </form>
  </dialog>

  <!-- MODAL: EDITAR META -->
  <dialog id="modal-edit" class="modal card" style="max-width:560px;">
    <h2 class="module-title" style="margin-top:0;">Editar Objetivo de Nutrición</h2>
    <form id="form-edit" class="registro-form">
      <label>Nombre del Objetivo</label>
      <input id="edit-name" type="text" value="Perder 5 kg" />

      <label>Tipo de Objetivo</label>
      <select>
        <option>Pérdida de Peso</option>
        <option>Hidratación</option>
        <option>Alimentación</option>
        <option>Actividad Física</option>
        <option>Descanso</option>
      </select>

      <div class="form-group-inline">
        <div class="input-group">
          <label>Valor Objetivo</label>
          <input type="number" value="5" />
        </div>
        <div class="input-group">
          <label>Unidad</label>
          <select>
            <option>kg</option><option>%</option><option>L</option><option>porciones</option>
          </select>
        </div>
      </div>

      <label>Frecuencia</label>
      <select>
        <option>Semanal</option><option>Diaria</option><option>Mensual</option>
      </select>

      <div class="form-group-inline">
        <div class="input-group">
          <label>Fecha de Inicio</label>
          <input type="date" value="2024-06-01" />
        </div>
        <div class="input-group">
          <label>Fecha Límite</label>
          <input type="date" value="2024-08-31" />
        </div>
      </div>

      <label>Progreso Actual</label>
      <input type="number" value="2" />

      <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:8px;">
        <button type="button" class="btn">Cancelar</button>
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
      </div>
    </form>
  </dialog>

  <!-- Pie de página modular -->
  <script>
    fetch('../components/footer.html')
      .then(res => res.text())
      .then(html => {
        document.body.insertAdjacentHTML('beforeend', html);
      });
  </script>
</body>
</html>