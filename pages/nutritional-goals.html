<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="utf-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 <title>Mis Metas â€” NutriTrack Web</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
  <script>
  fetch('../components/header.html')
   .then(res => res.text())
   .then(html => {
    document.body.insertAdjacentHTML('afterbegin', html);
   });
 </script>

 <main class="page-container">
  <h1 class="module-title">Mis Metas</h1>

    <div class="card" style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
   <input id="goal-search" class="search-input-header" style="max-width:380px;" placeholder="Buscar por nombre o frecuencia..." />
   <div style="display:flex; gap:8px; flex-wrap:wrap;">
    <button class="btn btn-edit" data-filter="all">Todos</button>
    <button class="btn btn-edit" data-filter="active">Activos</button>
    <button class="btn btn-edit" data-filter="done">Completados</button>
    <button class="btn btn-edit" data-filter="pending">Pendientes</button>
   </div>
   <div style="margin-left:auto;">
    <button id="btn-open-new" class="btn btn-primary">+ Agregar Objetivo</button>
   </div>
  </div>

    <div class="card table-responsive">
   <table class="data-table" id="goals-table">
    <thead>
     <tr>
      <th>Nombre del Objetivo</th>
      <th>Frecuencia</th>
      <th style="width:240px;">Progreso</th>
      <th class="actions">Acciones</th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>Beber 2L de agua diariamente</td>
      <td>Diario</td>
      <td>
       <div class="progress"><div class="progress__bar" style="width:75%"></div></div>
       <small>75%</small>
      </td>
      <td class="actions">
              <button class="btn btn-edit btn-sm" data-edit="1">Editar</button>
              <button class="btn btn-danger btn-sm" data-delete="1">Eliminar</button>
      </td>
     </tr>
     <tr>
      <td>Hacer ejercicio 3 veces a la semana</td>
      <td>Semanal</td>
      <td>
       <div class="progress"><div class="progress__bar" style="width:50%"></div></div>
       <small>50%</small>
      </td>
      <td class="actions">
       <button class="btn btn-edit btn-sm" data-edit="2">Editar</button>
       <button class="btn btn-danger btn-sm" data-delete="2">Eliminar</button>
      </td>
     </tr>
     <tr>
      <td>Dormir al menos 8 horas al dÃ­a</td>
      <td>Diario</td>
      <td>
       <div class="progress"><div class="progress__bar" style="width:55%"></div></div>
       <small>55%</small>
      </td>
      <td class="actions">
       <button class="btn btn-edit btn-sm" data-edit="3">Editar</button>
       <button class="btn btn-danger btn-sm" data-delete="3">Eliminar</button>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
 </main>

  <dialog id="modal-new" class="modal card" style="max-width:680px;">
  <h2 class="module-title" style="margin-top:0;">Agregar Nuevo Objetivo</h2>
  <form id="form-new" class="registro-form">
   <label>Nombre del Objetivo</label>
   <input type="text" required placeholder="Ej. Beber 2L de agua diarios" />

   <label>DescripciÃ³n</label>
   <textarea rows="4" placeholder="Â¿Por quÃ© es importante? Â¿CÃ³mo lo lograrÃ¡s?"></textarea>

   <label>Frecuencia</label>
   <select>
    <option>Diaria</option>
    <option>Semanal</option>
    <option>Mensual</option>
    <option>Largo Plazo</option>
    <option>Fecha Exacta</option>
   </select>

   <div class="form-group-inline">
    <div class="input-group">
     <label>Fecha de Inicio</label>
     <input type="date" />
    </div>
    <div class="input-group">
     <label>Fecha de Fin</label>
     <input type="date" />
    </div>
   </div>

   <label><input type="checkbox" /> Objetivo recurrente</label>

   <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:8px;">
        <button type="button" class="btn btn--ghost" data-close-new>Cancelar</button>
    <button type="submit" class="btn btn-primary">Guardar Objetivo</button>
   </div>
  </form>
 </dialog>

  <dialog id="modal-edit" class="modal card" style="max-width:560px;">
  <h2 class="module-title" style="margin-top:0;">Editar Objetivo de NutriciÃ³n</h2>
  <form id="form-edit" class="registro-form">
   <label>Nombre del Objetivo</label>
   <input id="edit-name" type="text" value="Perder 5 kg" />

   <label>Tipo de Objetivo</label>
   <select>
    <option>PÃ©rdida de Peso</option>
    <option>HidrataciÃ³n</option>
    <option>AlimentaciÃ³n</option>
    <option>Actividad FÃ­sica</option>
    <option>Descanso</option>
   </select>

   <div class="form-group-inline">
    <div class="input-group">
     <label>Valor Objetivo</label>
     <input type="number" value="5" />
    </div>
    <div class="input-group">
     <label>Unidad</label>
     <select>
      <option>kg</option><option>%</option><option>L</option><option>porciones</option>
     </select>
    </div>
   </div>

   <label>Frecuencia</label>
   <select>
    <option>Semanal</option><option>Diaria</option><option>Mensual</option>
   </select>

   <div class="form-group-inline">
    <div class="input-group">
     <label>Fecha de Inicio</label>
     <input type="date" value="2024-06-01" />
    </div>
    <div class="input-group">
     <label>Fecha LÃ­mite</label>
     <input type="date" value="2024-08-31" />
    </div>
   </div>

   <label>Progreso Actual</label>
   <input type="number" value="2" />

   <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:8px;">
        <button type="button" class="btn btn--ghost" data-close-edit>Cancelar</button>
    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
   </div>
  </form>
 </dialog>

  <dialog id="modal-delete" class="modal card" style="max-width: 500px; margin:auto;">
  <h3 class="module-title" style="margin-top:0; color: var(--color-error);">Confirmar EliminaciÃ³n</h3>
  <p class="p_subtle" style="text-align: center;">Â¿EstÃ¡s seguro que deseas eliminar este objetivo? Esta acciÃ³n no se puede deshacer.</p>
  
  <div style="display:flex; gap:12px; justify-content:center; margin-top:8px;">
      <button type="button" class="btn btn--ghost" data-close-delete>Cancelar</button>
   <button type="button" class="btn btn--danger" id="confirm-delete-btn">Confirmar</button>
  </div>
 </dialog>
<script>
  // Espera a que todo el contenido HTML estÃ© cargado
  document.addEventListener('DOMContentLoaded', () => {

   // --- 1. REFERENCIAS A LOS MODALES ---
   const newModal = document.getElementById('modal-new');
   const editModal = document.getElementById('modal-edit');
   const deleteModal = document.getElementById('modal-delete');

   // --- 2. REFERENCIAS A LOS BOTONES DE ABRIR ---
   const addNewBtn = document.getElementById('btn-open-new');
   const editButtons = document.querySelectorAll('.btn-edit[data-edit]');
   const deleteButtons = document.querySelectorAll('.btn-danger[data-delete]');

   // --- 3. REFERENCIAS A LOS BOTONES DE CERRAR ---
   const cancelNewBtn = document.querySelector('[data-close-new]');
   const cancelEditBtn = document.querySelector('[data-close-edit]');
      
      // --- â¬‡ï¸ INICIO DE LA CORRECCIÃ“N â¬‡ï¸ ---
      
   // Referencia al botÃ³n "Cancelar" del modal de eliminar
   const cancelDeleteBtn = document.querySelector('[data-close-delete]');
      // Referencia al botÃ³n "Confirmar" del modal de eliminar
   const confirmDeleteBtn = document.getElementById('confirm-delete-btn');

      // --- â¬†ï¸ FIN DE LA CORRECCIÃ“N â¬†ï¸ ---


   // --- 4. LÃ“GICA PARA ABRIR MODALES ---
   
   // Abrir modal "Agregar Nuevo"
   if (addNewBtn && newModal) {
    addNewBtn.addEventListener('click', () => {
     newModal.showModal(); // FunciÃ³n nativa de <dialog>
    });
   }

   // Abrir modal "Editar" para CADA botÃ³n de la tabla
   if (editModal) {
    editButtons.forEach(button => {
     button.addEventListener('click', () => {
      editModal.showModal();
     });
    });
   }

   // Abrir modal "Eliminar" para CADA botÃ³n de la tabla
   if (deleteModal) {
    deleteButtons.forEach(button => {
     button.addEventListener('click', () => {
      deleteModal.showModal();
     });
    });
   }

   // --- 5. LÃ“GICA PARA CERRAR MODALES ---
   
   if (cancelNewBtn && newModal) {
    cancelNewBtn.addEventListener('click', () => newModal.close());
   }
   if (cancelEditBtn && editModal) {
    cancelEditBtn.addEventListener('click', () => editModal.close());
   }
   
      // --- â¬‡ï¸ INICIO DE LA CORRECCIÃ“N â¬‡ï¸ ---

   // LÃ³gica para "Cancelar" en el modal de eliminar
   if (cancelDeleteBtn && deleteModal) {
    cancelDeleteBtn.addEventListener('click', () => deleteModal.close());
   }

   // LÃ³gica para "Confirmar" en el modal de eliminar
   if (confirmDeleteBtn && deleteModal) {
    confirmDeleteBtn.addEventListener('click', () => {
     console.log('Â¡Objetivo eliminado! (SimulaciÃ³n)'); 
     deleteModal.close(); 
    });
   }

  });
 </script>
   <script>
  fetch('../components/footer.html')
   .then(res => res.text())
   .then(html => {
    document.body.insertAdjacentHTML('beforeend', html);
   });
 </script>
</body>
<nav class="mobile-nav-bar">
        <a href="dashboard.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ </span>
            <span class="mobile-nav-text">Inicio</span>
        </a>
        <a href="registro_alimentos.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">â•</span>
            <span class="mobile-nav-text">Registro</span>
        </a>
        <a href="nutritional-goals.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">â¤ï¸</span>
            <span class="mobile-nav-text">Metas</span>
        </a>
        <a href="practicas_saludables.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸŒ±</span>
            <span class="mobile-nav-text">PrÃ¡cticas</span>
        </a>
        <a href="regitro-y-analisis.html" class="mobile-nav-link active">
            <span class="mobile-nav-icon">ğŸ“Š</span>
            <span class="mobile-nav-text">Reportes</span>
        </a>
        <a href="aprender-vida-saludable.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ“š</span>
            <span class="mobile-nav-text">Aprender</span>
        </a>
        <a href="foro-comunidad.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ“«</span>
            <span class="mobile-nav-text">Foro</span>
        </a>
        <a href="account-settings.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ‘¤</span>
            <span class="mobile-nav-text">Perfil</span>
        </a>
    </nav><nav class="mobile-nav-bar">
        <a href="dashboard.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ </span>
            <span class="mobile-nav-text">Inicio</span>
        </a>
        <a href="registro_alimentos.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">â•</span>
            <span class="mobile-nav-text">Registro</span>
        </a>
        <a href="nutritional-goals.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">â¤ï¸</span>
            <span class="mobile-nav-text">Metas</span>
        </a>
        <a href="practicas_saludables.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸŒ±</span>
            <span class="mobile-nav-text">PrÃ¡cticas</span>
        </a>
        <a href="regitro-y-analisis.html" class="mobile-nav-link active">
            <span class="mobile-nav-icon">ğŸ“Š</span>
            <span class="mobile-nav-text">Reportes</span>
        </a>
        <a href="aprender-vida-saludable.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ“š</span>
            <span class="mobile-nav-text">Aprender</span>
        </a>
        <a href="foro-comunidad.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ“«</span>
            <span class="mobile-nav-text">Foro</span>
        </a>
        <a href="account-settings.html" class="mobile-nav-link">
            <span class="mobile-nav-icon">ğŸ‘¤</span>
            <span class="mobile-nav-text">Perfil</span>
        </a>
    </nav>
</html>