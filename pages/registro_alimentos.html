<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NutriTrack Web - Registro Diario</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <script src="../js/header-loader.js"></script>

  <main class="page-container">
    <h2 class="module-title">Registro Diario de Comidas</h2>

    <div class="registro-layout">
      <div class="registro-form-column">
        <div class="card card-small">
          <h3>Seleccionar Fecha</h3>
          <input type="date" id="fecha" value="2025-09-26">
        </div>

        <div class="card">
          <h3>üçΩÔ∏è Registrar Comida</h3>
          <form id="registro-form" class="registro-form">
            <label for="nombre-alimento">Nombre del alimento</label>
            <input type="text" id="nombre-alimento" placeholder="Ej. Manzana" required>

            <label for="categoria">Categor√≠a</label>
            <select id="categoria" required>
              <option value="">Seleccionar categor√≠a</option>
              <option value="Fruta">Fruta</option>
              <option value="Verdura">Verdura</option>
              <option value="Prote√≠na">Prote√≠na</option>
              <option value="Carbohidrato">Carbohidrato</option>
              <option value="Dulce">Dulce</option>
              <option value="L√°cteo">L√°cteo</option>
              <option value="Grasa">Grasa</option>
            </select>

            <div class="form-group-inline">
              <div class="input-group">
                <label for="cantidad">Cantidad</label>
                <input type="number" id="cantidad" placeholder="Agregar cantidad..." required>
              </div>
              <div class="input-group">
                <label for="unidad">Peso/Unidades</label>
                <select id="unidad" required>
                  <option value="">Seleccionar</option>
                  <option value="gramos">Gramos (g)</option>
                  <option value="unidades">Unidades</option>
                </select>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Agregar</button>
          </form>
        </div>

        <div class="card card-resumen">
          <h3>Resumen Diario</h3>
          <div id="resumen-diario"></div>
        </div>
      </div>

      <div class="comidas-registradas-column">
        <div class="card card-full">
          <h3>Comidas Registradas</h3>
          <input type="search" id="buscador-comidas" placeholder="Buscar comidas..." class="search-input">
          <div class="table-responsive">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Alimento</th>
                  <th>Categor√≠a</th>
                  <th>Cantidad</th>
                  <th>Unidad</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tabla-comidas">
                <!-- Se llenar√° din√°micamente -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <nav class="mobile-nav-bar">
    <!-- navegaci√≥n m√≥vil sin cambios -->
  </nav>

  <!-- Modal editar comida -->
  <div id="modal-editar-comida" class="modal-overlay" style="display:none;">
    <div class="modal-content" onclick="event.stopPropagation()">
      <h3 class="modal-title">Editar Comida</h3>
      <form id="form-editar-comida">
        <label for="edit-nombre">Nombre de la Comida</label>
        <input type="text" id="edit-nombre" placeholder="Ej. Manzana" required>

        <label for="edit-categoria">Categor√≠a</label>
        <select id="edit-categoria" required>
          <option value="">Seleccionar Categor√≠a</option>
          <option value="Fruta">Fruta</option>
          <option value="Verdura">Verdura</option>
          <option value="Prote√≠na">Prote√≠na</option>
          <option value="Carbohidrato">Carbohidrato</option>
          <option value="Dulce">Dulce</option>
          <option value="L√°cteo">L√°cteo</option>
          <option value="Grasa">Grasa</option>
        </select>

        <label for="edit-cantidad">Cantidad</label>
        <input type="number" id="edit-cantidad" required>

        <label for="edit-unidad">Peso/Unidades</label>
        <select id="edit-unidad" required>
          <option value="">Seleccionar</option>
          <option value="gramos">Gramos (g)</option>
          <option value="unidades">Unidades</option>
        </select>

        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="cerrarModalEditar()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar cambios</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal eliminar comida -->
  <div id="modal-eliminar-comida" class="modal-overlay" style="display:none;">
    <div class="modal-content modal-small" onclick="event.stopPropagation()">
      <h3 class="modal-title">Eliminar Comida</h3>
      <p id="texto-eliminar">¬øEst√°s seguro de que quieres eliminar esta comida? Esta acci√≥n no se puede deshacer.</p>
      <div class="modal-actions">
        <button type="button" class="btn btn-secondary" onclick="cerrarModalEliminar()">Cancelar</button>
        <button type="button" class="btn btn-danger" id="btn-confirmar-eliminar">Confirmar eliminaci√≥n</button>
      </div>
    </div>
  </div>

  <script src="../js/registro_comidas.js"></script>
  <script>
    fetch('../components/footer.html')
      .then(res => res.text())
      .then(html => {
        document.body.insertAdjacentHTML('beforeend', html);
      });
  </script>
</body>
</html>